E:
很不错的一道题
利用树的DFS序的一个性质，一个子树的节点在DFS序中连续。
可以发现，如果a节点和b节点有公共节点，必然又一次加数操作u,v， u为a的祖先，v为b的祖先
那么显然这有着从祖先往下传递的性质：如果a和b有公共数字，那么a的子树中的任意节点都和b有公共数字

对于每次操作u,v，我们可以在u上做一个标记v，表示把v的子树的所有节点到加到u上去，再做一个标记u，同理，自己子树上面的点同样要加上来。
那么这和DFS序连接起来，也就是说我们的“加节点”是加连续的一段。
那么问题就变换为 我们每次加入一段元素，并随时查询总共有多少不重复元素，明显可以用线段树解决。
那么我们再DFS，并在DFS的同时对于当前节点上面的标记进行删加操作（进栈加，出栈减）即可